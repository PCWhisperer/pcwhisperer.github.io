{"version":3,"sources":["media/mars_lander.png","App.tsx","Utils.ts","SimRenderer.ts","Simulator.ts","Solution.ts","Solver.ts","serviceWorker.ts","index.tsx"],"names":["module","exports","ELanderStateProp","EGAOptions","Point","x","y","CancellationToken","cancelled","this","MyUtils","min","max","Math","ceil","floor","random","ms","Promise","resolve","setTimeout","x1","y1","x2","y2","x3","y3","x4","y4","denominator","ua","ub","SimRenderer","canvasCtx","canvasWidth","canvasHeight","landerImage","landerImageReady","terrainPoints","Image","imageSmoothingEnabled","imageSmoothingQuality","ctx","fillStyle","fillRect","terrainWithBackground","slice","push","strokeStyle","lineWidth","beginPath","moveTo","point","lineTo","getCanvasY","closePath","stroke","fill","abs","drawLabels","currState","prevState","animDurationMS","imgW","imgH","animate","contextDraw","angle","drawTerrain","translate","rotate","drawImage","currX","currY","currAngle","PI","drawAction","startTime","performance","now","prevAngle","prevX","prevY","window","requestAnimationFrame","renderLoop","currTime","percent","onload","e","src","require","solution","strokeColor","alpha","firstPoint","lander","stateHistory","globalAlpha","font","currLabelX","fillText","toString","currLabelY","LanderAction","power","rot","pow","minRot","maxRot","minPow","maxPow","state","LanderState","hSpeed","vSpeed","fuel","result","round","Lander","initialState","actionHistory","GRAVITY","validStatesCount","currentState","isScoreDirty","_touchDown","_fuelEnded","clone","actions","action","simulateAction","touchDown","fuelEnded","angleRad","acceleration","vAcc","cos","hAcc","sin","length","calcTrajectoryEnded","lastState","secondLastState","terrainPointsCount","terrainPointsWithBounds","i","tp1","tp2","intersects","Solution","landingSites","options","Score","Number","MIN_SAFE_INTEGER","perfectLanding","getScore","toFixed","absVSpeed","absHSpeed","absAngle","simulateLanding","evaluateScore","nearestLandingSite","minHorDistance","MAX_SAFE_INTEGER","currDist","score","horDistanceFromSite","MIN_LANDING_EXTEND","verDistanceFromSite","absTilt","exp","other","child1Actions","child2Actions","thisHistory","otherHistory","mutationFactor","MutationProbability","GenesCount","child1Lander","cloneLander","child2Lander","newActions","prevAction","createFromLanderState","rndIndex","newAction","getNextRandomAction","GAOptions","currAction","CGAOptions","PopulationCount","ElitismPercent","CGASolver","generationReady","cancellationToken","landingY","landingX","createStartingSolution","sort","a","b","population","eliteIndex","scoreSum","scores","currScore","j","parent1RndIndex","parent1Index","parent2Index","parent2RndIndex","sortedPop","selected","parents","rouletteWheelSelection","children","crossover","elite","selectElitism","forEach","child","mutate","MAX_TIME_MS","callbackIntervalMS","simulationEnded","Date","elapsedTime","lastRenderingTime","maxScore","createPopulation","genCount","reset","isCancelled","populateNextGenerationAndSortByScore","sleep","CLocalStorageManager","landerStateFromStorage","localStorage","getItem","landerState","fields","split","setItem","GAOptionsFromStorage","text","newTerrain","trim","points","terrainPointsText","pointsFromStorage","parseTerrainPoints","terrainPointToString","App","props","canvasRef","renderer","cancellationTokenForSimulation","onLanderStateChanged","prop","value","target","valueAsNumber","newState","saveStartingLanderState","drawLander","setState","onGAOptionsChanged","newOptions","saveStartingGAOptions","lastSolution","onGenerationReady","gen","genNumber","avgScore","elapsedTimeMS","message","padStart","generationDescr","drawTrajectory","startSimulation","solver","getSolution","finalSolution","solutionDescr","stopSimulation","cancel","animateSolution","states","onTerrainChange","newTerrainText","saveStartingTerrain","setTerrain","terrainTextElement","style","width","height","resize","onChange","React","createRef","getStartingLanderState","getStartingTerrain","getStartingGAOptions","setupRendererForSimulation","current","getContext","flexRowStyle","display","flexDirection","columnGap","justifyContent","buttonStyle","fontSize","className","fontFamily","gridTemplateColumns","gridTemplateRows","alignSelf","gridRow","gridColumn","fontWeight","margin","rowGap","alignItems","type","gridTemplate","onClick","role","aria-label","ref","whiteSpace","Component","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.9e6dfa4b.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARkAAAGSCAMAAADguUU+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADDUExURTQ0NBkZGREREQMDAwEBAQkJCRISEiMjIwwMDAAAAB0dHTMzMwgICB8fHxUVFQcHBxwcHCAgIAoKChYWFgQEBBcXFyQkJA8PDy8vLywsLCIiIg0NDR4eHioqKi0tLQYGBjIyMhgYGCsrKwUFBQICAhsbGyEhITU1NRAQECkpKTQ0Mw4ODhoaGjMzMi4uLhMTEzY2NigoKDU1NDAwMCUlJTExMRQUFCcnJywsKyYmJgsLCzExMDIyMS8vLjAwLysrKgAAAJQntHYAAABBdFJOU/////////////////////////////////////////////////////////////////////////////////////8AMFXsxwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAIClJREFUeF7tnWmbJLWxRlkaxs2wL2ZfBzCMuQbMZri27/z/X3WliCOlQhnKTcqqnn44X6Yn3ghF6O3q7qqsrMxnntwVnnn2uedvXnjxAf+9OnfCmb/cKjcR+eollCtydWceihPCZEzkZRKuxZWdeQEbItaYyCtkXYWrOvM8DghzY0LsVTKvwBWdeY3tK64xgdfJvjhXc+YNdg8tY0KMgktzLWcqFzDBkGNvUnNZruPMS7L1iWxCQRmj7KJcxZklExI29gKVF+QKzry135gAxZfj8s6smxBwYpd+2FzamZeOGhNiLHEhLuzM2x3G3Ny8wyoX4bLO+BveHnuedS7BJZ15pbVhy2KMpS7ABZ15c2HDBSuxv7La6VzOmeUNZ1Zj77Le2VzMmbUNw4bY26x4MpdyZn3DwqbYZf58X8aZ97ZsOLA1xrKnchFn3t+44e0xFj6TSzjzwaYNp4PiH/J/ZZ6nMZJP5ALOPGhsrox9RK4yHR2u8yIaI/U8znfm4+bmMs+ROsER4ipPSDEyT+N0Zz5Z2ByQaXg/ClWeMMXIPIvTnVncXORZEms+XTHmbGvOdmZlc0vbe2at9txfwyc7s7a5N8jzeXmx9vb2U/JO4Vxn7EYEsznSmnxGHpjayIvkncGpzrxWbSRQbu5z0pYo38Ysa+EL0k7gTGfemW3EbI6sFd4i2zXmzF81ZzrjbGTa3PY9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\"","import React, { ChangeEvent, CSSProperties } from 'react';\nimport './App.css';\nimport { SimRenderer } from './SimRenderer';\nimport { CGAOptions, CGASolver } from './Solver';\nimport { Solution } from \"./Solution\";\nimport { LanderState } from './Simulator';\nimport { Point, MyUtils, CancellationToken } from './Utils';\n\n// TODO: \n// considerare il carburante per la funzione di fitting\n\nenum ELanderStateProp {\n  x, y, angle,\n  hSpeed, vSpeed,\n  fuel, power\n}\nenum EGAOptions {\n  PopulationCount, GenesCount,\n  MutationProbability, ElitismPercent\n}\n\n\n\nclass CLocalStorageManager {\n  static getStartingLanderState(): LanderState {\n    let landerStateFromStorage = localStorage.getItem(\"landerState\");\n    let landerState = new LanderState(2000, 2000, 0, 0, -20, 1000, 10);\n    if (landerStateFromStorage) {\n      const fields = landerStateFromStorage.split(\"|\");\n      // \"x,y,angle,hSpeed,vSpeed,fuel,power\"\n      if (fields.length !== 7) return landerState;\n      landerState = new LanderState(\n        Number(fields[0]), Number(fields[1]), Number(fields[2]),\n        Number(fields[3]), Number(fields[4]),\n        Number(fields[5]), Number(fields[6]));\n    }\n    return landerState;\n  }\n\n  static saveStartingLanderState(landerState: LanderState) {\n    const x = landerState.x;\n    const y = landerState.y;\n    const angle = landerState.angle;\n    const hSpeed = landerState.hSpeed;\n    const vSpeed = landerState.vSpeed;\n    const fuel = landerState.fuel;\n    const power = landerState.power;\n    localStorage.setItem(\"landerState\", `${x}|${y}|${angle}|${hSpeed}|${vSpeed}|${fuel}|${power}`);\n  }\n\n  static getStartingGAOptions(): CGAOptions {\n    let GAOptionsFromStorage = localStorage.getItem(\"GAOptions\");\n    let GAOptions = new CGAOptions(20, 100, 0.10, 0.10);\n    if (GAOptionsFromStorage) {\n      const fields = GAOptionsFromStorage.split(\"|\");\n      // \"PopulationCount|GenesCount|MutationProbability|ElitismPercent\"\n      if (fields.length !== 4) return GAOptions;\n      GAOptions = new CGAOptions(Number(fields[0]), Number(fields[1]), Number(fields[2]), Number(fields[3]));\n    }\n    return GAOptions;\n  }\n\n  static saveStartingGAOptions(GAOptions: CGAOptions) {\n    const PopulationCount = GAOptions.PopulationCount;\n    const GenesCount = GAOptions.GenesCount;\n    const MutationProbability = GAOptions.MutationProbability;\n    const ElitismPercent = GAOptions.ElitismPercent;\n    localStorage.setItem(\"GAOptions\", `${PopulationCount}|${GenesCount}|${MutationProbability}|${ElitismPercent}`);\n  }\n\n  static parseTerrainPoints(text: string): Point[] {\n    let newTerrain: Point[] = [];\n    const fields = text.split(\",\");\n    if (fields.length % 2 === 1) return [];\n    for (let i = 0; i < fields.length / 2; i++) {\n      const [x, y] = [Number(fields[i * 2].trim()), Number(fields[i * 2 + 1].trim())];\n      newTerrain.push(new Point(x, y));\n    }\n    return newTerrain;\n  }\n\n  static terrainPointToString(points: Point[]): string {\n    let terrainPointsText = \"\";\n    for (let i = 0; i < points.length; i++) {\n      const point = points[i];\n      terrainPointsText += `${point.x}, ${point.y}`;\n      if (i < points.length - 1) {\n        terrainPointsText += `,\\n`;\n      }\n    }\n    return terrainPointsText;\n  }\n\n  static getStartingTerrain(): Point[] {\n    let pointsFromStorage = localStorage.getItem(\"terrainPoints\");\n    let points = [\n      new Point(0, 1500),\n      new Point(2000, 1700),\n      new Point(1000, 500),\n      new Point(2000, 500),\n      new Point(5000, 1500),\n      new Point(6000, 1500),\n      new Point(7000, 1000)];\n    if (pointsFromStorage) {\n      // \"x1,y1,...,xn,yn\"\n      points = CLocalStorageManager.parseTerrainPoints(pointsFromStorage);\n    }\n    return points;\n  }\n\n  static saveStartingTerrain(points: Point[]) {\n    localStorage.setItem(\"terrainPoints\", CLocalStorageManager.terrainPointToString(points));\n  }\n}\n\nclass AppState {\n  constructor(\n    public solutionDescr: string,\n    public generationDescr: string,\n    public landerState: LanderState,\n    public terrainPoints: Point[],\n    public GAOptions: CGAOptions,\n  ) { }\n}\nclass App extends React.Component<{}, AppState> {\n\n  private canvasRef: React.RefObject<HTMLCanvasElement>;\n  private renderer!: SimRenderer;\n  private cancellationTokenForSimulation: CancellationToken;\n\n  constructor(props: {}) {\n    super(props);\n    this.canvasRef = React.createRef<HTMLCanvasElement>();\n    this.cancellationTokenForSimulation = new CancellationToken();\n    this.state = {\n      solutionDescr: \"\",\n      generationDescr: \"\",\n      landerState: CLocalStorageManager.getStartingLanderState(),\n      terrainPoints: CLocalStorageManager.getStartingTerrain(),\n      GAOptions: CLocalStorageManager.getStartingGAOptions(),\n    };\n  }\n\n  async componentDidMount() {\n    await this.setupRendererForSimulation();\n  }\n\n  async setupRendererForSimulation() {\n    const ctx = this.canvasRef.current?.getContext(\"2d\")!;\n    this.renderer = new SimRenderer(ctx, 7000, 3000);\n    this.renderer.setTerrain(this.state.terrainPoints);\n    this.renderer.drawLander(this.state.landerState);\n  }\n\n  private onLanderStateChanged = (prop: ELanderStateProp) => (e: React.ChangeEvent<HTMLInputElement>) => {\n    let value = e.target.valueAsNumber;\n    let newState = this.state.landerState.clone();\n    switch (prop) {\n      case ELanderStateProp.x: newState.x = value; break;\n      case ELanderStateProp.y: newState.y = value; break;\n      case ELanderStateProp.hSpeed: newState.hSpeed = value; break;\n      case ELanderStateProp.vSpeed: newState.vSpeed = value; break;\n      case ELanderStateProp.angle: newState.angle = value; break;\n      case ELanderStateProp.fuel: newState.fuel = value; break;\n      case ELanderStateProp.power: newState.power = value; break;\n    }\n    CLocalStorageManager.saveStartingLanderState(newState);\n    this.renderer.drawLander(newState);\n    this.setState({ landerState: newState })\n  };\n\n  private onGAOptionsChanged = (prop: EGAOptions) => (e: React.ChangeEvent<HTMLInputElement>) => {\n    let value = e.target.valueAsNumber;\n    let newOptions = this.state.GAOptions;\n    switch (prop) {\n      case EGAOptions.PopulationCount: newOptions.PopulationCount = value; break;\n      case EGAOptions.GenesCount: newOptions.GenesCount = value; break;\n      case EGAOptions.MutationProbability: newOptions.MutationProbability = value; break;\n      case EGAOptions.ElitismPercent: newOptions.ElitismPercent = value; break;\n    }\n    CLocalStorageManager.saveStartingGAOptions(newOptions)\n    this.setState({ GAOptions: newOptions })\n  };\n\n  private lastSolution!: Solution;\n\n  private onGenerationReady = async (gen: Solution[], genNumber: number, avgScore: number, elapsedTimeMS: number) => {\n    let message = `#Gen: ${genNumber.toFixed(0).padStart(5, \"0\")}`;\n    message += `-> MaxScore: ${avgScore.toFixed(1).padStart(5, \"0\")},`;\n    message += ` [${elapsedTimeMS.toFixed(0).padStart(8, \"0\")}ms]`;\n\n    this.setState({ generationDescr: message });\n    let alpha = 0.5;\n    this.renderer.drawTrajectory(gen[0], `#${(genNumber % 255).toString(16)}8FFF`, alpha);\n  };\n\n  private startSimulation = async () => {\n    this.renderer.drawLander(this.state.landerState);\n    const renderer = this.renderer;\n    let solver = new CGASolver(this.state.GAOptions, this.state.landerState, this.state.terrainPoints,\n      this.onGenerationReady, this.cancellationTokenForSimulation);\n    const finalSolution = await solver.getSolution(-1, 100);\n    this.lastSolution = finalSolution;\n\n    this.renderer.drawLander(this.state.landerState);\n\n    if (finalSolution.perfectLanding()) {\n      renderer.drawTrajectory(finalSolution, \"#00FF00\");\n    } else {\n      renderer.drawTrajectory(finalSolution, \"#FF0000\");\n    }\n\n    this.setState({ solutionDescr: finalSolution.toString() })\n  };\n\n  private stopSimulation = () => {\n    this.cancellationTokenForSimulation.cancel();\n  };\n\n  private animateSolution = async () => {\n    if (this.lastSolution) {\n      const states = this.lastSolution.lander.stateHistory;\n      for (let i = 0; i < states.length; i++) {\n        if (i > 0) {\n          this.renderer.drawLander(states[i], states[i - 1], 100);\n        } else {\n          this.renderer.drawLander(states[i]);\n        }\n        // this.renderer.drawTrajectory(this.lastSolution, \"#0000FF\");\n        await MyUtils.sleep(100);\n      }\n    }\n  };\n\n  private onTerrainChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const newTerrainText = e.target.value.trim();\n    const newTerrain = CLocalStorageManager.parseTerrainPoints(newTerrainText);\n    if (newTerrain.length === 0) return;\n    CLocalStorageManager.saveStartingTerrain(newTerrain);\n    this.renderer.setTerrain(newTerrain);\n    this.renderer.drawLander(this.state.landerState);\n    this.setState({ terrainPoints: newTerrain });\n  };\n\n  private terrainTextElement = () => {\n    const terrainPointsText = CLocalStorageManager.terrainPointToString(this.state.terrainPoints);\n    return (<textarea\n      style={{ width: \"100%\", height: \"100%\", resize: \"none\" }}\n      value={terrainPointsText} onChange={this.onTerrainChange} ></textarea>);\n  }\n\n  render() {\n    const textBoxWidth = \"50px\";\n    const flexRowStyle: CSSProperties = { display: \"flex\", flexDirection: \"row\", columnGap: \"5px\", justifyContent: \"space-around\" };\n    const buttonStyle: CSSProperties = { width: \"auto\", fontSize: \"20px\" };\n    return (\n      <div className=\"App\" style={{\n        fontFamily: \"consolas\", height: \"100vh\", display: \"grid\",\n        gridTemplateColumns: \"300px 1fr\", gridTemplateRows: \"50px 1fr 50px 100px\"\n      }}>\n        <div style={{ alignSelf: \"center\", gridRow: \"1\", gridColumn: \"1/3\", fontSize: \"20px\", fontWeight: \"bold\" }}>\n          Mars Lander - A Genetic Algorithm approach\n        </div>\n        <div style={{\n          gridRow: \"2/5\", gridColumn: \"1\", margin: \"10px\",\n          display: \"flex\", flexDirection: \"column\", rowGap: \"10px\", alignItems: \"flex-start\"\n        }}>\n          <div style={{ fontWeight: \"bold\" }}>Lander parameters</div>\n          <div>Position</div>\n          <div style={{ ...flexRowStyle }}>\n            <span>x</span>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.landerState.x}\n              onChange={this.onLanderStateChanged(ELanderStateProp.x)} ></input>\n            <span>y</span>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.landerState.y}\n              onChange={this.onLanderStateChanged(ELanderStateProp.y)} ></input>\n            <span>âˆ </span>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.landerState.angle}\n              onChange={this.onLanderStateChanged(ELanderStateProp.angle)} ></input>\n          </div>\n          <div>Speed</div>\n          <div style={{ ...flexRowStyle }}>\n            <span>â†’</span>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.landerState.hSpeed}\n              onChange={this.onLanderStateChanged(ELanderStateProp.hSpeed)} ></input>\n            <span>â†‘</span>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.landerState.vSpeed}\n              onChange={this.onLanderStateChanged(ELanderStateProp.vSpeed)} ></input>\n          </div>\n          <div>Engine</div>\n          <div style={{ ...flexRowStyle }}>\n            <span>fuel</span>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.landerState.fuel}\n              onChange={this.onLanderStateChanged(ELanderStateProp.fuel)} ></input>\n            <span>power</span>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.landerState.power}\n              onChange={this.onLanderStateChanged(ELanderStateProp.power)} ></input>\n          </div>\n          <div style={{ fontWeight: \"bold\" }}>Terrain [x1,y1,...,xn,yn]</div>\n          {this.terrainTextElement()}\n          <div style={{ fontWeight: \"bold\" }}>GA parameters</div>\n          <div style={{ display: \"grid\", gridTemplate: \"1fr 1fr 1fr 1fr / 1fr auto\", alignItems: \"center\" }}>\n            <div>Trajectories [chromosomes] / generation</div>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.GAOptions.PopulationCount}\n              onChange={this.onGAOptionsChanged(EGAOptions.PopulationCount)} ></input>\n            <div>Maneuvers [genes] count</div>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.GAOptions.GenesCount}\n              onChange={this.onGAOptionsChanged(EGAOptions.GenesCount)} ></input>\n            <div>Mutation probability %</div>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.GAOptions.MutationProbability}\n              onChange={this.onGAOptionsChanged(EGAOptions.MutationProbability)} ></input>\n            <div>Elitism %</div>\n            <input type='number' style={{ width: textBoxWidth }}\n              value={this.state.GAOptions.ElitismPercent}\n              onChange={this.onGAOptionsChanged(EGAOptions.ElitismPercent)} ></input>\n          </div>\n          <div style={{ fontWeight: \"bold\" }}>Simulation</div>\n          <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n            <button style={buttonStyle} onClick={this.startSimulation} >â–¶ play</button>\n            <button style={buttonStyle} onClick={this.stopSimulation} >â–  stop</button>\n            <button style={buttonStyle} onClick={this.animateSolution} ><span role='img' aria-label='clapper board'>ðŸŽ¬ animate</span></button>\n          </div>\n        </div>\n        <canvas ref={this.canvasRef}\n          style={{ width: \"100%\", gridRow: \"2\", gridColumn: \"2\" }} width=\"7000\" height=\"3000\"></canvas>\n        <div style={{ fontSize: \"20px\", gridRow: \"3\", gridColumn: \"2\" }} >{this.state.generationDescr}</div>\n        <div style={{ fontSize: \"20px\", whiteSpace: \"break-spaces\", gridRow: \"4\", gridColumn: \"2\" }} >{this.state.solutionDescr}</div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export class Point {\r\n  constructor(\r\n    public x: number,\r\n    public y: number\r\n  ) { }\r\n}\r\n\r\nexport class CancellationToken {\r\n  private cancelled: boolean = false;\r\n  reset() {\r\n    this.cancelled = false;\r\n  }\r\n  cancel() {\r\n    this.cancelled = true;\r\n  }\r\n  isCancelled(){\r\n    return this.cancelled;\r\n  }\r\n}\r\n\r\nexport class MyUtils {\r\n  static random(min: number, max: number): number {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n  }\r\n\r\n  static async sleep(ms: number) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n\r\n  static intersects(\r\n    x1: number, y1: number, x2: number, y2: number,\r\n    x3: number, y3: number, x4: number, y4: number): boolean {\r\n\r\n    const denominator = ((y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1));\r\n\r\n    // Lines are parallel\r\n    if (denominator === 0) {\r\n      return false;\r\n    }\r\n\r\n    let ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator;\r\n    let ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denominator;\r\n\r\n    // is the intersection along the segments\r\n    if (ua < 0 || ua > 1 || ub < 0 || ub > 1) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n","import { Solution } from \"./Solution\";\r\nimport { LanderState } from \"./Simulator\";\r\nimport { Point } from \"./Utils\";\r\n\r\nexport class SimRenderer {\r\n\r\n  private landerImage: HTMLImageElement;\r\n  private landerImageReady: boolean;\r\n  private terrainPoints: Point[];\r\n\r\n  constructor(\r\n    private canvasCtx: CanvasRenderingContext2D,\r\n    private canvasWidth: number,\r\n    private canvasHeight: number\r\n  ) {\r\n    this.landerImageReady = false;\r\n    this.landerImage = new Image(281, 402);\r\n    this.canvasCtx.imageSmoothingEnabled = true;\r\n    this.canvasCtx.imageSmoothingQuality = \"high\";\r\n    this.terrainPoints = [];\r\n  }\r\n\r\n  private getCanvasY(y: number) {\r\n    return this.canvasHeight - y;\r\n  }\r\n\r\n  setTerrain(terrainPoints: Point[]) {\r\n    this.terrainPoints = terrainPoints;\r\n  }\r\n\r\n  drawTerrain() {\r\n    // sfondo\r\n    const ctx = this.canvasCtx;\r\n    ctx.fillStyle = \"#997751\";\r\n    ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n\r\n    let terrainWithBackground = this.terrainPoints.slice();\r\n    terrainWithBackground.push(new Point(this.canvasWidth, 0));\r\n    terrainWithBackground.push(new Point(0, 0));\r\n\r\n    ctx.strokeStyle = \"#602D1C\";\r\n    ctx.lineWidth = 10;\r\n    ctx.fillStyle = \"#602D1C\";\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    for (let point of terrainWithBackground) {\r\n      ctx.lineTo(point.x, this.getCanvasY(point.y));\r\n    }\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n    ctx.fill()\r\n\r\n    let [x, y] = [0, 0]\r\n    for (let point of this.terrainPoints) {\r\n      if (y === point.y && Math.abs(x - point.x) >= 1000) {\r\n        ctx.lineWidth = 20;\r\n        ctx.strokeStyle = \"#39A030\";\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, this.getCanvasY(y));\r\n        ctx.lineTo(point.x, this.getCanvasY(point.y));\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n      }\r\n      [x, y] = [point.x, point.y]\r\n    }\r\n\r\n    this.drawLabels();\r\n  }\r\n\r\n  drawLander(currState: LanderState, prevState: LanderState | null = null, animDurationMS = 20) {\r\n    const [imgW, imgH] = [200, 286];\r\n    const ctx = this.canvasCtx;\r\n    const animate = !!prevState;\r\n\r\n    const contextDraw = (x: number, y: number, angle: number) => {\r\n      this.drawTerrain();\r\n      ctx.translate(x, y - imgH * 0.5);\r\n      ctx.rotate(angle);\r\n      ctx.drawImage(this.landerImage, -imgW * 0.5, -imgH * 0.5, imgW, imgH);\r\n      ctx.rotate(-angle);\r\n      ctx.translate(-x, -y + imgH * 0.5);\r\n    }\r\n\r\n    const [currX, currY] = [currState.x, this.getCanvasY(currState.y)];\r\n    const currAngle = -currState.angle / 180 * Math.PI;\r\n\r\n    const drawAction = () => {\r\n      if (animate) {\r\n        const startTime = performance.now();\r\n        const prevAngle = -prevState.angle / 180 * Math.PI;\r\n        const [prevX, prevY] = [prevState.x, this.getCanvasY(prevState.y)];\r\n\r\n        const renderLoop = (currTime: DOMHighResTimeStamp) => {\r\n          const percent = (currTime - startTime) / animDurationMS;\r\n          if (percent > 1) {\r\n            contextDraw(currX, currY, currAngle);\r\n            return;\r\n          }\r\n          const x = prevX + (currX - prevX) * percent;\r\n          const y = prevY + (currY - prevY) * percent;\r\n          const angle = prevAngle + (currAngle - prevAngle) * percent;\r\n          contextDraw(x, y, angle);\r\n          window.requestAnimationFrame(renderLoop);\r\n        }\r\n        window.requestAnimationFrame(renderLoop);\r\n      } else {\r\n        contextDraw(currX, currY, currAngle);\r\n      }\r\n    }\r\n\r\n    if (!this.landerImageReady) {\r\n      this.landerImage.onload = (e: Event): any => {\r\n        drawAction();\r\n        this.landerImageReady = true;\r\n      };\r\n      this.landerImage.src = require(\"./media/mars_lander.png\");\r\n    } else {\r\n      drawAction();\r\n    }\r\n  }\r\n\r\n  drawTrajectory(solution: Solution, strokeColor: string = \"#FF0000\", alpha: number = 1) {\r\n    const ctx = this.canvasCtx;\r\n    let firstPoint = solution.lander.stateHistory[0];\r\n    let [x, y] = [firstPoint.x, firstPoint.y]\r\n    ctx.strokeStyle = strokeColor;\r\n    ctx.lineWidth = 10;\r\n    ctx.globalAlpha = alpha;\r\n    for (let point of solution.lander.stateHistory) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(x, this.canvasHeight - y);\r\n      ctx.lineTo(point.x, this.canvasHeight - point.y);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n      [x, y] = [point.x, point.y]\r\n    }\r\n    ctx.globalAlpha = 1;\r\n  }\r\n\r\n  drawLabels() {\r\n    const ctx = this.canvasCtx;\r\n    ctx.fillStyle = \"#ffd966\";\r\n    ctx.font = \"80px sans-serif\";\r\n    {\r\n      let currLabelX = 500;\r\n      while (currLabelX < this.canvasWidth) {\r\n        ctx.fillText(currLabelX.toString(), currLabelX, this.getCanvasY(50));\r\n        ctx.fillRect(currLabelX, this.getCanvasY(50), 10, 50);\r\n        currLabelX += 500;\r\n      }\r\n    }\r\n    {\r\n      let currLabelY = 500;\r\n      while (currLabelY < this.canvasHeight) {\r\n        ctx.fillText(currLabelY.toString(), 50, this.getCanvasY(currLabelY));\r\n        ctx.fillRect(0, this.getCanvasY(currLabelY), 50, 10);\r\n        currLabelY += 500;\r\n      }\r\n    }\r\n  }\r\n\r\n}","import { MyUtils, Point } from \"./Utils\";\r\n\r\nexport class LanderAction {\r\n  constructor(\r\n    // rotazione del lander in gradi (verticale = 0) [-90...90], +/-15Â° rispetto al turno precedente\r\n    public angle: number,\r\n    // accelerazione (m/s^2) [0,1,2,3,4], +/-1 rispetto al turno precedente\r\n    public power: number,\r\n  ) { }\r\n\r\n  static createFromLanderState(state: LanderState): LanderAction {\r\n    return new LanderAction(state.angle, state.power);\r\n  }\r\n\r\n  getNextRandomAction(): LanderAction {\r\n    const rot = this.angle;\r\n    const pow = this.power;\r\n    const minRot = Math.max(rot - 10, -90);\r\n    const maxRot = Math.min(rot + 10, 90);\r\n    const minPow = Math.max(pow - 1, 0);\r\n    const maxPow = Math.min(pow + 1, 10);\r\n    return new LanderAction(MyUtils.random(minRot, maxRot), MyUtils.random(minPow, maxPow));\r\n  }\r\n\r\n}\r\n\r\nexport class LanderState {\r\n  constructor(\r\n    // posizione lander\r\n    public x: number,\r\n    public y: number,\r\n    // rotazione del lander in gradi (verticale = 0) [-90...90], +/-15Â° rispetto allo stato attuale\r\n    public angle: number,\r\n    // velocitÃ  nei due assi (m/s)\r\n    public hSpeed: number,\r\n    public vSpeed: number,\r\n    // quantitÃ  di benzina (l) [0...2000]\r\n    public fuel: number,\r\n    // accelerazione (m/s^2) [0,1,2,3,4], +/-1 rispetto allo stato attuale\r\n    public power: number,\r\n  ) { }\r\n\r\n  public get absVSpeed(): number {\r\n    return Math.abs(this.vSpeed);\r\n  }\r\n  public get absHSpeed(): number {\r\n    return Math.abs(this.hSpeed);\r\n  }\r\n  public get absAngle(): number {\r\n    return Math.abs(this.angle);\r\n  }\r\n\r\n  clone(): LanderState {\r\n    return new LanderState(\r\n      this.x,\r\n      this.y,\r\n      this.angle,\r\n      this.hSpeed,\r\n      this.vSpeed,\r\n      this.fuel,\r\n      this.power,\r\n    );\r\n  }\r\n\r\n  toString(): string {\r\n    let result = `x:${Math.round(this.x)} `;\r\n    result += `y:${Math.round(this.y)} `;\r\n    result += `angle:${Math.round(this.angle)} `;\r\n    result += `hSpeed:${Math.round(this.hSpeed)} `;\r\n    result += `vSpeed:${Math.round(this.vSpeed)} `;\r\n    result += `fuel:${Math.round(this.fuel)} `;\r\n    result += `power:${Math.round(this.power)}`;\r\n    return result;\r\n  }\r\n}\r\n\r\nexport class Lander {\r\n  private readonly GRAVITY = -3.711;\r\n  public validStatesCount: number = -1;\r\n\r\n  public readonly currentState: LanderState;\r\n  public readonly stateHistory: LanderState[] = [];\r\n  public isScoreDirty: boolean = true;\r\n\r\n  // lo stato iniziale e le azioni compiute dal lander sono immutabili\r\n  constructor(\r\n    public readonly initialState: LanderState,\r\n    public readonly actionHistory: LanderAction[],\r\n    private terrainPoints: Point[]\r\n  ) {\r\n    this.currentState = initialState.clone();\r\n    this.stateHistory.push(initialState);\r\n  }\r\n\r\n  private _touchDown: boolean = false;\r\n  public get touchDown(): boolean {\r\n    return this._touchDown;\r\n  }\r\n  private _fuelEnded: boolean = false;\r\n  public get fuelEnded(): boolean {\r\n    return this._fuelEnded;\r\n  }\r\n\r\n  cloneLander(actions: LanderAction[]): Lander {\r\n    return new Lander(this.initialState, actions, this.terrainPoints);\r\n  }\r\n\r\n  simulateLanding() {\r\n    for (let action of this.actionHistory) {\r\n      this.simulateAction(action);\r\n      if (this.touchDown || this.fuelEnded)\r\n        return;\r\n    }\r\n  }\r\n\r\n  private simulateAction(action: LanderAction) {\r\n    this.currentState.angle = action.angle;\r\n    this.currentState.power = action.power;\r\n\r\n    const angleRad = this.currentState.angle / 180 * Math.PI;\r\n    const acceleration = this.currentState.power;\r\n    const vAcc = acceleration * Math.cos(-angleRad);\r\n    const hAcc = acceleration * Math.sin(-angleRad);\r\n    this.currentState.vSpeed += vAcc + this.GRAVITY;\r\n    this.currentState.hSpeed += hAcc;\r\n\r\n    this.currentState.fuel -= acceleration;\r\n    this.currentState.x += this.currentState.hSpeed;\r\n    this.currentState.y += this.currentState.vSpeed;\r\n\r\n    this.stateHistory.push(this.currentState.clone())\r\n\r\n    this.validStatesCount = this.stateHistory.length - 1;\r\n    this.calcTrajectoryEnded();\r\n    this.isScoreDirty = true;\r\n  }\r\n\r\n  private calcTrajectoryEnded() {\r\n    if (this.currentState.fuel <= 0) {\r\n      this._fuelEnded = true;\r\n      return;\r\n    }\r\n\r\n    this._touchDown = false;\r\n    let lastState = this.stateHistory[this.stateHistory.length - 1];\r\n    let secondLastState = this.stateHistory[this.stateHistory.length - 2];\r\n\r\n    // Aggiunte limiti laterali del canvas\r\n    let terrainPointsCount = this.terrainPoints.length;\r\n    let terrainPointsWithBounds = [new Point(0, 100000)];\r\n    terrainPointsWithBounds.push(...this.terrainPoints);\r\n    terrainPointsWithBounds.push(new Point(this.terrainPoints[terrainPointsCount - 1].x, 100000));\r\n\r\n    for (let i = 0; i <= terrainPointsWithBounds.length - 2; i++) {\r\n      const tp1 = terrainPointsWithBounds[i];\r\n      const tp2 = terrainPointsWithBounds[i + 1];\r\n      const intersection = MyUtils.intersects(\r\n        secondLastState.x, secondLastState.y, lastState.x, lastState.y,\r\n        tp1.x, tp1.y, tp2.x, tp2.y\r\n      );\r\n      if (intersection) {\r\n        this._touchDown = true;\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n}","import { LanderAction, LanderState, Lander } from \"./Simulator\";\r\nimport { Point, MyUtils } from \"./Utils\";\r\nimport { CGAOptions } from \"./Solver\";\r\n\r\n// https://www.codingame.com/blog/genetic-algorithm-mars-lander/?utm_source=codingame&utm_medium=details-page&utm_campaign=cg-blog&utm_content=mars-lander-2\r\n\r\nexport class Solution {\r\n  private Score: number = Number.MIN_SAFE_INTEGER;\r\n\r\n  constructor(\r\n    public lander: Lander,\r\n    private landingSites: Point[],\r\n    private readonly options: CGAOptions\r\n  ) { }\r\n\r\n  toString(): string {\r\n    let result = `Atterraggio ${this.perfectLanding() ? \"COMPLETATO\" : \"NON RIUSCITO\"}\\n`;\r\n    result += `Azioni:${this.lander.validStatesCount} Punteggio: ${this.getScore().toFixed(0)}\\n`;\r\n    result += `Lander: ${this.lander.currentState.toString()}`;\r\n    return result;\r\n  }\r\n\r\n  static createStartingSolution(\r\n    initialState: LanderState, terrainPoints: Point[],\r\n    landingSites: Point[], GAOptions: CGAOptions\r\n  ): Solution {\r\n    let actions = [LanderAction.createFromLanderState(initialState)];\r\n    let currAction = actions[0];\r\n    for (let i = 0; i < GAOptions.GenesCount; i++) {\r\n      currAction = currAction.getNextRandomAction();\r\n      actions.push(currAction);\r\n    }\r\n    let lander = new Lander(initialState, actions, terrainPoints);\r\n    return new Solution(lander, landingSites, GAOptions);\r\n  }\r\n\r\n  perfectLanding(): boolean {\r\n    if (this.lander.fuelEnded)\r\n      return false;\r\n    if (!this.lander.touchDown)\r\n      return false;\r\n    if (this.lander.currentState.absVSpeed > 40)\r\n      return false;\r\n    if (this.lander.currentState.absHSpeed > 20)\r\n      return false;\r\n    if (this.lander.currentState.absAngle > 0)\r\n      return false;\r\n    return true;\r\n  }\r\n\r\n  getScore(): number {\r\n    if (this.lander.isScoreDirty) {\r\n      this.lander.simulateLanding();\r\n      this.Score = this.evaluateScore();\r\n      this.lander.isScoreDirty = false;\r\n    }\r\n    return this.Score;\r\n  }\r\n\r\n  private evaluateScore(): number {\r\n    // l'atterraggio ha successo se:\r\n    // - il terreno Ã¨ piatto\r\n    // - il lander Ã¨ in posizione verticale (angle = 0Â°)\r\n    // - la velocitÃ  verticale deve avere un modulo <= 40m/s\r\n    // - la velocitÃ  orizzontale deve avere un modulo <= 20m/s\r\n\r\n    // (TODO) Il punteggio Ã¨ maggiore se:\r\n    // - viene risparmiato piÃ¹ carburante\r\n    // - vengono eseguite meno manovre\r\n\r\n    let nearestLandingSite = new Point(0, 0);\r\n    let minHorDistance = Number.MAX_SAFE_INTEGER;\r\n    for (let i = 0; i < this.landingSites.length; i++) {\r\n      const currDist = Math.abs(this.landingSites[i].x - this.lander.currentState.x);\r\n      if (currDist < minHorDistance) {\r\n        minHorDistance = currDist;\r\n        nearestLandingSite = this.landingSites[i];\r\n      }\r\n    }\r\n\r\n    let score = 0;\r\n    const MIN_LANDING_EXTEND = 1000;\r\n    const HALF_MIN_LANDING_EXTEND = MIN_LANDING_EXTEND * 0.5;\r\n    const horDistanceFromSite = minHorDistance - HALF_MIN_LANDING_EXTEND;\r\n    const verDistanceFromSite = this.lander.currentState.y - nearestLandingSite.y;\r\n    if (horDistanceFromSite > 0 || verDistanceFromSite > 0) {\r\n      score += 200;\r\n      // zona di atterraggio mancata\r\n      if (horDistanceFromSite > 0)\r\n        score += horDistanceFromSite;\r\n      if (verDistanceFromSite > 0)\r\n        score += verDistanceFromSite;\r\n    } else {\r\n      // atterraggio nella zona giusta, verifico stato del lander\r\n      let absVSpeed = this.lander.currentState.absVSpeed - 40;\r\n      let absHSpeed = this.lander.currentState.absHSpeed - 20;\r\n      let absTilt = this.lander.currentState.absAngle;\r\n      if (absVSpeed > 0)\r\n        score += absVSpeed;\r\n      if (absHSpeed > 0)\r\n        score += absHSpeed;\r\n      if (absTilt > 0)\r\n        score += absTilt;\r\n    }\r\n\r\n    const max_score = 1000;\r\n    // this.Score = newScore;\r\n    // this.Score = Math.max(newScore, 0);\r\n    // this.Score = 5000 - score;\r\n    this.Score = max_score * Math.exp(-score / 500);\r\n    return this.Score;\r\n  }\r\n\r\n  crossover(other: Solution): [Solution, Solution] {\r\n    // Continuous Genetic Algorithm\r\n    // https://towardsdatascience.com/continuous-genetic-algorithm-from-scratch-with-python-ff29deedd099\r\n    let child1Actions: LanderAction[] = [];\r\n    let child2Actions: LanderAction[] = [];\r\n    let thisHistory = this.lander.actionHistory;\r\n    let otherHistory = other.lander.actionHistory;\r\n    let mutationFactor = 0;\r\n    if (Math.random() < this.options.MutationProbability) {\r\n      mutationFactor = Math.random();\r\n    }\r\n    for (let i = 0; i < this.options.GenesCount; i++) {\r\n      child1Actions.push(new LanderAction(\r\n        mutationFactor * thisHistory[i].angle + (1 - mutationFactor) * otherHistory[i].angle,\r\n        mutationFactor * otherHistory[i].power + (1 - mutationFactor) * thisHistory[i].power\r\n      ));\r\n      child2Actions.push(new LanderAction(\r\n        mutationFactor * otherHistory[i].angle + (1 - mutationFactor) * thisHistory[i].angle,\r\n        mutationFactor * thisHistory[i].power + (1 - mutationFactor) * otherHistory[i].power\r\n      ));\r\n    }\r\n    let child1Lander = this.lander.cloneLander(child1Actions);\r\n    let child2Lander = this.lander.cloneLander(child2Actions);\r\n    return [\r\n      new Solution(child1Lander, this.landingSites, this.options),\r\n      new Solution(child2Lander, this.landingSites, this.options)\r\n    ];\r\n  }\r\n\r\n  mutate() {\r\n    let newActions: LanderAction[] = [];\r\n    let prevAction = LanderAction.createFromLanderState(this.lander.initialState);\r\n    let rndIndex = MyUtils.random(0, this.options.GenesCount - 1);\r\n    for (let i = 0; i < this.options.GenesCount; i++) {\r\n      let newAction = this.lander.actionHistory[i];\r\n      if (i === rndIndex) {\r\n        newAction = prevAction.getNextRandomAction();\r\n      }\r\n      newActions.push(newAction);\r\n      prevAction = newAction;\r\n    }\r\n    this.lander = this.lander.cloneLander(newActions);\r\n  }\r\n\r\n}\r\n","import { LanderState } from \"./Simulator\";\r\nimport { Solution } from \"./Solution\";\r\nimport { Point, MyUtils, CancellationToken } from \"./Utils\";\r\n\r\nexport class CGAOptions {\r\n  constructor(\r\n    public PopulationCount: number,\r\n    public GenesCount: number,\r\n    public MutationProbability: number,\r\n    public ElitismPercent: number) { }\r\n}\r\n\r\nexport class CGASolver {\r\n  private readonly landingSites: Point[];\r\n\r\n  constructor(\r\n    private readonly GAOptions: CGAOptions,\r\n    private initialState: LanderState,\r\n    private terrainPoints: Array<Point>,\r\n    public generationReady: (gen: Solution[], genNumber: number, avgScore: number, elapsedTime: number) => void,\r\n    private cancellationToken: CancellationToken,\r\n  ) {\r\n    this.landingSites = [];\r\n    let [x, y] = [0, 0];\r\n    for (let point of terrainPoints) {\r\n      // cerco il sito di atterraggio\r\n      if (y === point.y && Math.abs(x - point.x) >= 1000) {\r\n        let landingY = y;\r\n        let landingX = Math.round(x + Math.abs(x - point.x) * 0.5);\r\n        this.landingSites.push(new Point(landingX, landingY));\r\n      }\r\n      [x, y] = [point.x, point.y];\r\n    }\r\n  }\r\n\r\n  private createPopulation(): Solution[] {\r\n    let result: Solution[] = [];\r\n    for (let i = 0; i < this.GAOptions.PopulationCount; i++) {\r\n      result.push(Solution.createStartingSolution(\r\n        this.initialState, this.terrainPoints, this.landingSites, this.GAOptions));\r\n    }\r\n    result.sort((a, b) => (b.getScore() - a.getScore()));\r\n    return result;\r\n  }\r\n\r\n  private selectElitism(population: Solution[]): Solution[] {\r\n    const eliteIndex = Math.round(this.GAOptions.PopulationCount * this.GAOptions.ElitismPercent);\r\n    return population.slice(0, eliteIndex);\r\n  }\r\n\r\n  private rouletteWheelSelection(population: Solution[]): [Solution, Solution] {\r\n    let scoreSum = 0;\r\n    let scores: number[] = [];\r\n\r\n    for (let i = 0; i < population.length; i++) {\r\n      let currScore = population[i].getScore();\r\n      scores.push(currScore);\r\n      scoreSum += currScore;\r\n    }\r\n    // somma cumulativa\r\n    for (let i = 0; i < population.length; i++) {\r\n      for (let j = i + 1; j < scores.length; j++) {\r\n        scores[i] += scores[j];\r\n      }\r\n    }\r\n    // normalizzazione\r\n    for (let i = 0; i < scores.length; i++) {\r\n      scores[i] /= scoreSum;\r\n    }\r\n    // ricerca due genitori (primo individuo con punteggio maggiore di un valore casuale)\r\n    const parent1RndIndex = Math.random();\r\n    let parent1Index = 0;\r\n    for (let i = scores.length - 1; i >= 0; i--) {\r\n      if (scores[i] > parent1RndIndex) {\r\n        parent1Index = i;\r\n        break;\r\n      }\r\n    }\r\n    let parent2Index = parent1Index === 0 ? scores.length - 1 : 0;\r\n    let parent2RndIndex = Math.random();\r\n    for (let i = scores.length - 1; i >= 0; i--) {\r\n      if (scores[i] > parent2RndIndex) {\r\n        parent2Index = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return [population[parent1Index], population[parent2Index]]\r\n  }\r\n\r\n  private populateNextGenerationAndSortByScore(sortedPop: Solution[]): Solution[] {\r\n    let selected: Solution[] = [];\r\n    // crossover fino a riempire la nuova pool\r\n    while (selected.length < sortedPop.length) {\r\n      let parents = this.rouletteWheelSelection(sortedPop);\r\n      let children = parents[0].crossover(parents[1]);\r\n      selected.push(...children);\r\n    }\r\n    // prendo l'elite dalla popolazione precedente e la copio nella nuova pool\r\n    let elite = this.selectElitism(sortedPop);\r\n    for (let i = 0; i < elite.length; i++) {\r\n      selected[i] = elite[i];\r\n    }\r\n\r\n    // muto ogni nuovo individuo\r\n    selected.forEach((child) => child.mutate());\r\n    // ordino ancora dopo la mutazione\r\n    selected.sort((a, b) => (b.getScore() - a.getScore()));\r\n\r\n    return selected;\r\n  }\r\n\r\n  public async getSolution(MAX_TIME_MS = -1, callbackIntervalMS = 200): Promise<Solution> {\r\n    let simulationEnded = false;\r\n    const startTime = Date.now();\r\n    let elapsedTime = 0;\r\n    let lastRenderingTime = Date.now();\r\n    let elapsedTimeFromLastRendering = 0;\r\n\r\n    let maxScore = Number.MIN_SAFE_INTEGER;\r\n\r\n    let population = this.createPopulation();\r\n    let result = population[0];\r\n    let genCount = 0;\r\n\r\n    this.cancellationToken.reset();\r\n    while (!simulationEnded && !this.cancellationToken.isCancelled()) {\r\n      // ogni ciclo Ã¨ una generazione\r\n      population = this.populateNextGenerationAndSortByScore(population);\r\n      // gli individui sono giÃ  ordinati per punteggio\r\n      let currScore = population[0].getScore();\r\n      if (currScore > maxScore) {\r\n        maxScore = currScore;\r\n        result = population[0];\r\n      }\r\n      genCount += 1;\r\n      elapsedTime = (Date.now() - startTime);\r\n      simulationEnded = result.perfectLanding();\r\n      if (MAX_TIME_MS > 0) {\r\n        simulationEnded = simulationEnded || (elapsedTime > MAX_TIME_MS);\r\n      }\r\n\r\n      // callback per renderer\r\n      elapsedTimeFromLastRendering = (Date.now() - lastRenderingTime);\r\n      if (elapsedTimeFromLastRendering > callbackIntervalMS) {\r\n        lastRenderingTime = Date.now();\r\n        await this.generationReady(population, genCount, maxScore, elapsedTime);\r\n        await MyUtils.sleep(1);\r\n      }\r\n    }\r\n    this.generationReady(population, genCount, maxScore, elapsedTime);\r\n    return result;\r\n  }\r\n\r\n}\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}